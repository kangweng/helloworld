### Quantumult 规则说明 ###
此处为使用说明，同时也是给自己写的一些备注，如果太乱无法理解的地方，请忽略。
#### Quantumult.conf ####
Quantumult.conf 为适合 CN 地区（尝试兼容海外连国内）使用的规则，其中只包含有代理有关的规则，不包含服务器订阅配置和链接阻止配置。
原配置参考：[lhie1][01]
* 不含去广告功能
* 域名直连时的匹配与 IP 匹配方式基本无性能差异，写上国内域名（无 CDN 的）主要是为了方便海外连国内的用户将这部分替换成 PROXY 模式
* 如上所述，国内域名部分主要是给海外用户改规则用的，不需要添加太多。默认域名是全部交给 GEOIP 和最终的规则来处理
* 域名通用代理部分的目标是加入 gfwlist 中的域名，并全部走远程解析
* 通用代理 gfwlist 中的域名会视情况加入规则，部分会有额外自定义策略需求的移除单独配置
* 自定义部分针对部分服务进行个性化策略配置（待完善）
* 自定义部分待增加锁区服务的配置
* 自定义部分未来可能会拆分出一个规则文件单独写
* 脑洞：锁区服务一般本身也只提供该区的 IP，遂尝试加入常见锁 US&JP 区的策略
* 规则有待完善，格式因为是在他人规则上改的，还没有理清思路该怎么按照自己的喜好来整理

#### 个人备注 ####
* 当一个域名有规则匹配时，HTTP 模块处理的，直连时 DNS 查询在本地进行，代理时 DNS 查询由代理服务器负责。TUN 模块处理的，无 force-remote-dns 时，直连则在本地查询 IP 并连接，代理则在本地查询出 IP 并转发到代理服务器进行代理连接（无 force-remote-dns 时代理会有污染问题，且在本地要查一次 DNS）。有 force-remote-dns 时，返回 fake IP，再将 IP 转译为域名形式向代理服务器转发
* 当一个域名无规则匹配时，由 HTTP 模块处理的，本地进行 DNS 查询进行 IP 匹配，直连则使用本地 DNS 结果，代理则以域名形式转发到代理服务器，再在代理服务器进行一次 DNS 查询。由 TUN 模块处理的，本地进行 DNS 查询并匹配 IP 规则，直连则使用 DNS 查询结果直连，代理则会以 IP 形式向代理服务器转发。
* 不写域名比写了域名多一次 DNS 本地查询的情况：由 HTTP 模块处理的，被 IP 匹配到要代理的情况（因此需要完善代理域名列表）
* 写了域名比不写域名要多一次代理的情况：由 TUN 模块处理的，需要代理但是没加 force-remote-dns 的情况（因此我给代理列表的域名全部采用远端解析，虽然该选项只对 TUN 的情况有用，但是精确区分走 TUN 的域名比较麻烦）。
* 所以对于规则的最佳方式，应该是尽量完善被墙域名列表，尽量少用 force-remote-dns

[01]: https://github.com/lhie1/Rules